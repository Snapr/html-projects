<!DOCTYPE html> 
<html> 
    <head> 
        <title>TripMapper</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1"> 
        <link rel="stylesheet" href="app/libs/jquery.mobile-1.0/jquery.mobile-1.0.css" type="text/css" charset="utf-8">
        <!-- <link rel="stylesheet" href="app/libs/jquery.mobile-1.0/jquery.mobile.structure-1.0.css" type="text/css" charset="utf-8"> -->
        <link rel="stylesheet" href="css/photoswipe.css" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="css/tripmapper.css" type="text/css" charset="utf-8">
    </head> 
<body> 
    <div id="menu" data-title="Welcome" data-role="page">
        <div data-role="header">
            <h1>TripMapper</h1>
        </div><!-- /header -->

        <div data-role="content">
            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <a href="#" data-corners="false" data-shadow="false" data-role="button" data-theme="c">Snap Photo</a>
                </div>
                <div class="ui-block-b">
                    <a href="#" data-corners="false" data-shadow="false" data-role="button" data-theme="b">Dashboard</a>
                </div>
            </div>

            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <a href="#popular" data-corners="false" data-shadow="false" data-role="button" data-theme="e" data-ajax="false">Popular</a>
                </div>
                <div class="ui-block-b">
                    <a href="#" data-corners="false" data-shadow="false" data-role="button" data-theme="c" class="my-snaps" data-ajax="false">Latest</a>
                </div>
            </div>

            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <a href="#map" data-corners="false" data-shadow="false" data-role="button" data-theme="c" data-ajax="false">Map</a>
                </div>
                <div class="ui-block-b">
                    <a href="#" data-corners="false" data-shadow="false" data-role="button" data-theme="c" data-ajax="false">Cities</a>
                </div>
            </div>

            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <a href="#login" 
                    data-ajax="false" data-corners="false" data-shadow="false" data-role="button"
                    class="login-logout">Log In</a>
                </div>
                <div class="ui-block-b">
                    <a href="#join" 
                    data-ajax="false" data-corners="false" data-shadow="false" data-role="button"
                    class="join-account">Join</a>
                </div>

            </div>
        </div><!-- /content -->

    </div><!-- /page -->

    <div id="popular" data-title="Popular" data-add-back-btn="true" data-role="page">
        <div data-role="header">
            <h1>Popular</h1>
        </div>
        <div data-role="content">
            <fieldset data-role="controlgroup" data-type="horizontal" id="popular-timeframe">
                <input type="radio" name="options-popular-timeframe" value="time-today" id="popular-time-today">
                <label for="popular-time-today">Today</label>
                <input type="radio" name="options-popular-timeframe" value="time-week" id="popular-time-week">
                <label for="popular-time-week">Week</label>
                <input type="radio" name="options-popular-timeframe" value="time-all" id="popular-time-all" checked="true">
                <label for="popular-time-all">All</label>
            </fieldset>

            <ul class="popular-list">
            </ul>
        </div>
    </div><!-- /page -->
    <div id="feed" data-add-back-btn="true" data-role="page">
        <div data-role="header">
            <h1>Feed</h1>
            <a href="#/" data-ajax="false" class="ui-btn-right">Menu</a>
        </div>
        <div data-role="content">
            <ul class="gallery">
            </ul>
        </div>
        <!-- <div data-role="footer"> -->
            <button class="more ui-btn-right">More</button>
        <!-- </div> -->
    </div><!-- /page -->
    <div id="login" data-add-back-btn="true" data-role="dialog">
        <div data-role="header">
            <h1>Log in</h1>
        </div>
        <div data-role="content">
            <form action="javascript: void(0);" accept-charset="utf-8" id="login-dialog">
                <fieldset>
                    <label for="username">Username</label><input type="text" name="username" placeholder="  " autocapitalize="off" id="login-dialog-username">
                    <label for="password">Password</label><input type="password" name="password" placeholder="  " id="login-dialog-password">
                    <input type="submit" name="login" data-theme="b" value="Log In">
                </fieldset>
            </form>
            
            
            <!-- <p>Log in with:</p>
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-role="button" data-theme="c">Twitter</a></li>
                    <li><a href="#" data-role="button" data-theme="c">Facebook</a></li>
                </ul>
            </div> -->
            
            
            <ul data-role="listview" data-theme="c" data-inset="true">
                <li><a href="#join" data-ajax="false">Join Snapr</a></li>
                <!-- <li><a href="#">Forgot your username or password?</a></li> -->
            </ul>
        </div>
    </div><!-- /page -->
    <div id="join-snapr" data-add-back-btn="true" data-role="dialog">
        <div data-role="header">
            <h1>Join Snapr</h1>
        </div>
        <div data-role="content">
            <form action="javascript: void(0);" accept-charset="utf-8" id="join-dialog">
                <fieldset data-role="controlgroup">
                    <label for="username">Username</label><input type="text" name="username" placeholder="  " autocapitalize="off" id="join-dialog-username">
                    <label for="password">Password</label><input type="password" name="password" placeholder="  " id="join-dialog-password">
                    <label for="email">Email</label><input type="email" name="email" placeholder="  " id="join-dialog-email">
                    <!-- <label for="tos">I have read and agreed to the <a href="http://sna.pr/terms/" target="_blank" >Snapr Terms of Use</a></label><input type="checkbox" name="tos" placeholder="  " id="join-dialog-tos"> -->
                </fieldset>
                <fieldset data-role="controlgroup">
                    <legend>I have read and agreed to the <a href="http://sna.pr/terms/" target="_blank" >Snapr Terms of Use</a></legend>
                    <input type="checkbox" name="checkbox-1" id="checkbox-1" class="custom" />
                    <label for="checkbox-1">I agree</label>
                </fieldset>
                <input disabled="true" type="submit" name="login" data-theme="b" value="Join">
            </form>

            <!-- <div data-role="fieldcontain"> -->
            <!-- </div> -->
        </div>
        <div data-role="footer">
            
        </div>
    </div><!-- /page -->
    <div id="map" data-role="page">
        <div data-role="header">
            <h1>Map</h1>
        </div>
        <div data-role="content">
            MMMMap
        </div>
        <div data-role="footer">
            
        </div>
    </div><!-- /page -->

<script id="thumb-li-template" type="text/template">
<% _.each( results, function( item, i ){ %>
<li>
<a data-ajax="false" href="#feed/?photo_id=<%= item.get('id') %>&username=<%= item.get('username') %>">
<img height="75px" width="75px" src="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/thm/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" alt="<%= item.get('description') %>" class="thumb-image" />
</a>
</li>
<% }); %>
</script>

<script id="feed-li-template" type="text/template">
<li class="feed-li">
<div>

<a data-ajax="false" data-transition="slide" href="#feed/?username=<%= item.get('username') %>"><img src="http://sna.pr/avatars/<%= item.get('username') %>/" alt="<%= item.get('username') %>" /></a>
<div>
    <h3><a data-ajax="false" data-transition="slide" href="#feed/?username=<%= item.get('username') %>"><%= item.get('username') %></a></h3>
    <p><%= item.get('location').location %> <%= item.get('date') %></p>
</div>

<a href="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/lrg/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" rel="external" class="gallery_link"><img style="width:100%;height:<%= tripmapper.utils.get_photo_height(item.get('width'), item.get('height'), '#feed .ui-content') %>px;" src="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/lrg/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" alt="<%= item.get('description') %>" class="thumb-image" /></a>
<h3><%= item.get('description') %></h3>
<div data-role="button" data-icon="star" data-inline="true" data-iconpos="notext" class="favorite-button" <% if(item.get('favorite')){ %> data-theme="e" <% }%>></div>
<% if (parseInt(item.get('comments')) + parseInt(item.get('favorite_count')) > 0){ %>
<div data-role="collapsible" data-collapsed="true" class="reactions-button">
    <h3><%= item.get('comments') %> comments and <%= item.get('favorite_count') %> favorites</h3>
    <ul data-inset="true">
    </ul>
</div>
<%}else{%>
<div data-role="collapsible" data-collapsed="true" class="reactions-button" style="display:none;">
    <h3><%= item.get('comments') %> comments and <%= item.get('favorite_count') %> favorites</h3>
    <ul data-inset="true">
    </ul>
</div>
<%}%>
<div data-role="collapsible" data-collapsed="true" class="comment-area">
    <h4>Comment</h4>
    <div>
        <form action="javascript:void(0);" class="comment-form" accept-charset="utf-8">
            <textarea name="comment-<%= item.get('id') %>" placeholder="Comment" />
            <input type="submit" value="Submit" />
        </form>
    </div>
</div>

</li>
</script>

<script id="reaction-li-template" type="text/template">
<% if(reaction.get('type') == 'comment'){ %>
    <li><a data-ajax="false" href="#feed/?username=<%= reaction.get('username') %>"><img class="ui-li-icon" src="http://sna.pr/avatars/<%= reaction.get('username') %>" width="16px" height="16px" /><h5><%= reaction.get('username') %>:</h5><p><%= reaction.get('comment') %></p></a></li>
<% }else{ %>
    <li><a data-ajax="false" href="#feed/?username=<%= reaction.get('username') %>"><img class="ui-li-icon" src="http://sna.pr/avatars/<%= reaction.get('username') %>" width="16px" height="16px" /><h5><%= reaction.get('username') %> likes this.</h5></a></li>
<% } %>
</script>

<script src="app/libs/json2.js" type="text/javascript" charset="utf-8"></script> <!-- just in case the browser sucks at JSON -->

<script src="app/libs/jquery-1.6.4.min.js" type="text/javascript" charset="utf-8"></script>
<script src="app/libs/jquery.validate.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
    // disable jquery-mobile's hash nav so we can replace it with backbone.js
    $(document).bind("mobileinit", function(){
        $.mobile.ajaxEnabled = false;
        $.mobile.pushStateEnabled = false;
        $.mobile.hashListeningEnabled = false;
        $.mobile.defaultPageTransition = 'none';

        // hack to handle cases where we're going directly to a hash
        // we go to the home screen and re-trigger the navigate event
        var redirect = window.location.hash.replace('#','')
        if(redirect.length){
            window.location.hash = '';
            setTimeout(function(){
                Route.navigate(redirect, true);
            },50)
        }
    });
</script>
<script src="app/libs/jquery.mobile-1.0/jquery.mobile-1.0.js" type="text/javascript" charset="utf-8"></script>

<script src="app/libs/klass.min.js" type="text/javascript" charset="utf-8"></script> <!-- used by photoswipe -->
<script src="app/libs/code.photoswipe.jquery-3.0.0.js" type="text/javascript" charset="utf-8"></script> <!-- photoswipe -->

<script src="app/libs/underscore.js" type="text/javascript" charset="utf-8"></script> <!-- required by backbone -->
<script src="app/libs/backbone.js" type="text/javascript" charset="utf-8"></script> <!-- handles routing, models and sync -->

<!-- <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> --> <!-- google maps -->

<!-- <script src="js/libs/jqmrouter.js" type="text/javascript" charset="utf-8"></script> -->
<script type="text/javascript" charset="utf-8">
    tripmapper = {};
    tripmapper.models = {};
    tripmapper.views = {};
    tripmapper.base_url = "http://dev.sna.pr";
    tripmapper.api_base = tripmapper.base_url + "/api";
    tripmapper.access_token_url = tripmapper.base_url + "/ext/oauth/access_token/";
</script>

<script src="app/views/home.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/login.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/login_logout_button.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/popular.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/thumbs_li.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/feed.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/feed_list.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/feed_li.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/reactions.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/map.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/join_snapr.js" type="text/javascript" charset="utf-8"></script>


<script src="app/models/auth.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/user.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/photo.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/photo_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/comment.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/favorite.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/thumb.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/thumb_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/reaction_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/reaction.js" type="text/javascript" charset="utf-8"></script>
<script src="app/tripmapper.js" type="text/javascript" charset="utf-8"></script>

</body>
</html>