<!DOCTYPE html> 
<html> 
    <head> 
        <title>PINK</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <!-- <link rel="stylesheet" href="app/libs/jquery.mobile-1.0/jquery.mobile-1.0.css" type="text/css" charset="utf-8"> -->
        <link rel="stylesheet" href="app/libs/jquery.mobile-1.0/jquery.mobile.structure-1.0.css" type="text/css" charset="utf-8">
        <link href="css/theme.less" rel="stylesheet/less" type="text/css">
        <script src="app/libs/less.js" type="text/javascript" charset="utf-8"></script>
        
        <link rel="stylesheet" href="css/photoswipe.css" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="css/snapr.css" type="text/css" charset="utf-8">
    </head> 
<body> 

    <div id="home" data-title="PINK Nation" data-role="page">
        <div data-role="content">
            <ul data-role="listview">
                <li class="home-featured"><a data-ajax="false" href="#/feed/?appgroup=pink-nation"><img src="http://placehold.it/200x200" alt="thumbnail">Featured Girls</a></li>
                <li class="home-photo"><a data-ajax="false" href="#/upload/"><img src="http://placehold.it/200x150" alt="camera icon">Take a photo</a></li>
                <li class="home-roll"><a data-ajax="false" href="#/photo-edit/?photo_id=CAT"><img src="http://placehold.it/100x100" alt="camera roll icon">Use an existing photo</a></li>
                <li class="home-pink-hearts"><a transition="slide" href="http://pink.victoriassecret.com/m/pink_hearts/"><img src="http://placehold.it/150x150" alt="camera roll icon">Pink Hearts</a></li>
            </ul>
        </div><!-- /content -->
    </div><!-- /page -->


    <div id="linked-services" data-title="Linked Services" data-add-back-btn="true" data-role="dialog">
        <div data-role="header">
            <h1>Linked Services</h1>
        </div>
        <div data-role="content">
            <div class="services-content">
                <h2 class="tolink-message"></h2>
                <h4>Services to Link</h4>
                <div class="add-services">
                </div>
                <h4>Linked Services</h4>
                <div class="linked-services">
                </div>
            </div>
        </div>
    </div>


    <div id="feed" data-role="page" data-add-back-btn="true">
        <div data-role="header">
            <h1>Featured Girls</h1>
        </div>
        <div class="feed-content" data-role="content">
            <ul class="gallery">
            </ul>
        </div>
        <button class="more ui-btn-right">More</button>
    </div><!-- /page -->


    <div id="login" data-add-back-btn="true" data-role="dialog">
        <div data-role="header">
            <h1>Log in</h1>
        </div>
        <div data-role="content">
            <form action="javascript: void(0);" accept-charset="utf-8" id="login-dialog">
                <fieldset>
                    <label for="username">Username</label><input type="text" name="username" placeholder="  " autocapitalize="off" id="login-dialog-username">
                    <label for="password">Password</label><input type="password" name="password" placeholder="  " id="login-dialog-password">
                    <input type="submit" name="login" data-theme="b" value="Log In">
                </fieldset>
            </form>

            <!-- <p>Log in with:</p>
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-role="button" data-theme="c">Twitter</a></li>
                    <li><a href="#" data-role="button" data-theme="c">Facebook</a></li>
                </ul>
            </div> -->
            
            <ul data-role="listview" data-theme="c" data-inset="true">
                <li><a href="#/join/" data-ajax="false">Join Snapr</a></li>
                <!-- <li><a href="#">Forgot your username or password?</a></li> -->
            </ul>
        </div>
    </div><!-- /page -->


    <div id="upload" data-role="page">
        <div data-role="header">
            <h1>Upload</h1>
            <div class="right-header-buttons">
                <a href="#/" data-ajax="false" data-role="button" data-icon="home" data-iconpos="notext"></a>
            </div>
        </div>
        <div data-role="content">
            <div data-role="fieldcontain">
                <form id="upload-form" action="javascript:void(0);" method="POST" enctype="multipart/form-data">
                    <input type="hidden" name="redirect_uri" id="redirect_uri"/>
                    <input type="hidden" name="device-time" id="device-time"/>
                    <input type="hidden" name="-set-later-" id="_access_token"/>
                    <input type="hidden" name="privacy" id="privacy" value="queued"/>
                    
                    <label for="username">Select a photo to upload:</label>
                    <input type="file" name="photo" id="upload-file" />
                    
                    <input disabled="true" type="submit" value="Upload Snap" id="upload-submit" />
                </form>
            </div>
            
        </div>
    </div>

    <div id="uploading" data-role="page">
        <div data-role="header">
            <a class="cancel-uploads" data-ajax="false" data-role="button">Cancel</a>
            <h1>Uploading</h1>
        </div>
        <div data-role="content">
        </div>
    </div>

    <div id="photo-edit" data-role="page">
        <div data-role="header">
            <a href="#/" data-ajax="false" data-role="button">Cancel</a>
            <h1>Share</h1>
        </div>
        <div data-role="content">
            <div class="ui-grid-a">
                <div class="edit-image ui-block-a"></div>
                <div class="ui-block-b">
                    <textarea name="description" id="description" placeholder="Add a message&hellip;"></textarea>
                </div>
            </div>
            <div data-role="fieldcontain">
                <input type="checkbox" name="enter-girl-of-month" id="enter-girl-of-month" />
                <label for="enter-girl-of-month" class="ui-bar-e">Submit my photo to PINK Nation and enter Girl of The Month</label>
            </div>
            
            <div data-role="controlgroup" data-type="horizontal" class="sharing-settings">
                <legend>Share to:</legend>

                <div data-role="fieldcontain">
                    <label for="facebook-sharing">Facebook</label>
                    <select name="slider" id="facebook-sharing" data-role="slider">
                        <option value="off">Off</option>
                        <option value="on" selected="true">On</option>
                    </select>
                </div>

                <div data-role="fieldcontain">
                    <label for="tumblr-sharing">Tumblr</label>
                    <select name="slider" id="tumblr-sharing" data-role="slider">
                        <option value="off">Off</option>
                        <option value="on" selected="true">On</option>
                    </select>
                </div>

            </div>

            <div data-role="fieldcontain" class="ui-grid-b">
                <a data-role="button" data-inline="true" data-theme="e" class="share ui-block-c">Share</a>
            </div>
        </div>
    </div>

<script id="my-account-template" type="text/template">
<h2>My Account</h2>

<div data-role="collapsible" data-collapsed="true">
    <h3>Account Name & Email</h3>
    <fieldset data-role="controlgroup">
        <label for="my-account-name">Your Name</label>
        <input type="text" name="my-account-name" id="my-account-name" class="custom"
        value="<%= settings.profile.name %>" />
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="my-account-email">Email</label>
        <input type="text" name="my-account-email" id="my-account-email" class="custom"
        value="<%= settings.email %>" />
    </fieldset>
    <button data-theme="b" class="save">Save</button>
</div>

<div data-role="collapsible" data-collapsed="true">
    <h3>Password</h3>
    <fieldset data-role="controlgroup">
        <label for="my-account-password">New Password</label>
        <input type="password" name="my-account-password" id="my-account-password" class="custom"
        value="" />
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="my-account-password-verify">Verify</label>
        <input type="password" name="my-account-password-verify" id=" my-account-password-verify" class="custom"
        value="" />
    </fieldset>
    <button data-theme="b" class="save">Save</button>
</div>

<div data-role="collapsible" data-collapsed="true">
    <h3>Notifications</h3>
    <legend>Email me when:</legend>
    <fieldset data-role="controlgroup">
        <input type="checkbox" name="my-account-notify-follow" id="my-account-notify-follow" class="custom" 
        <% if (settings.profile.notify_when_added_to_group){%> checked="true" <%}%> />
        <label for="my-account-notify-follow">Someone follows me</label>

        <input type="checkbox" name="my-account-notify-favorite" id="my-account-notify-favorite" class="custom" 
        <% if (settings.profile.notify_when_image_favorited){%> checked="true" <%}%> />
        <label for="my-account-notify-favorite">Someone favorites one of my images</label>

        <input type="checkbox" name="my-account-notify-comment" id="my-account-notify-comment" class="custom" 
        <% if (settings.profile.notify_when_comment_added){%> checked="true" <%}%> />
        <label for="my-account-notify-comment">Someone comments on one of my images</label>

        <input type="checkbox" name="my-account-notify-comment-after" id="my-account-notify-comment-after" class="custom" 
        <% if (settings.profile.notify_after_comment){%> checked="true" <%}%> />
        <label for="my-account-notify-comment-after">Someone comments on an image I&apos;ve commented on</label>

        <input type="checkbox" name="my-account-notify-moderation" id="my-account-notify-moderation" class="custom" 
        <% if (settings.profile.notify_when_image_moderated){%> checked="true" <%}%> />
        <label for="my-account-notify-moderation">One of my images has been moderated</label>

        <input type="checkbox" name="my-account-notify-snapr" id="my-account-notify-snapr" class="custom" 
        <% if (settings.profile.subscribe_to_email_newsletter){%> checked="true" <%}%> />
        <label for="my-account-notify-snapr">Snapr has exciting news</label>
    </fieldset>
    
    <button data-theme="b" class="save">Save</button>
    
</div>

<div data-role="collapsible" data-collapsed="true">
    <h3>Profile</h3>
    
    <fieldset data-role="controlgroup" class="my-account-avatar">
        <legend>Avatar</legend>

        <input type="radio" name="my-account-avatar-twitter" id="my-account-avatar-twitter" value="twitter"
        <% if (settings.profile.avatar_type == 'twitter'){ %> checked="true" <% } %> />
        <label for="my-account-avatar-twitter">Twitter</label>

        <input type="radio" name="my-account-avatar-facebook" id="my-account-avatar-facebook" value="facebook"
        <% if (settings.profile.avatar_type == 'facebook'){ %> checked="true" <% } %> />
        <label for="my-account-avatar-facebook">Facebook</label>

        <input type="radio" name="my-account-avatar-gravatar" id="my-account-avatar-gravatar" value="gravatar"
        <% if (settings.profile.avatar_type == 'gravatar'){ %> checked="true" <% } %> />
        <label for="my-account-avatar-gravatar">Gravatar</label>
        
        <button class="my-account-set-up-gravatar">Set up Gravatar</button>

    </fieldset>

    <fieldset data-role="controlgroup">
        <label for="my-account-profile-name">Your Name</label>
        <input type="text" name="my-account-profile-name" id="my-account-profile-name" class="custom"
        value="<%= settings.profile.name %>" />
    </fieldset>

    <fieldset data-role="controlgroup">
        <label for="my-account-location">Location</label>
        <input type="text" name="my-account-location" id="my-account-location" class="custom"
        value="<%= settings.profile.location %>" />
    </fieldset>

    <fieldset data-role="controlgroup">
        <label for="my-account-website">Website</label>
        <input type="text" name="my-account-website" id="my-account-website" class="custom"
        value="<%= settings.profile.website %>" />
    </fieldset>

    <fieldset data-role="controlgroup">
        <label for="my-account-bio">Bio</label>
        <textarea name="my-account-bio" id="my-account-bio" class="custom"><%= settings.profile.bio %></textarea>
    </fieldset>

    <button data-theme="b" class="my-account-save">Save</button>
</div>

<h2>Linked Services</h2>
<div class="linked-services">
</div>

<h2>Add Services</h2>
<div class="add-services">
</div>
</script>

<script id="upload-mode-template" type="text/template">
<fieldset data-role="controlgroup" data-type="horizontal" class="upload-mode-toggle">
    <input type="radio" id="upload-mode-on" value="on">
    <label for="upload-mode-on">On</label>
    <input type="radio" id="upload-mode-wifi" value="wifi">
    <label for="upload-mode-wifi">Wifi</label>
</fieldset>
<button class="upload-pause" data-inline="true" data-icon="minus" data-iconpos="left">Pause Upload Queue</button>
</script>

<script id="add-linked-service-template" type="text/template">
<div data-role="collapsible" data-collapsed="true">
<% switch(provider) { case 'twitter': %>
    <h3>Link Twitter</h3>
    <fieldset data-role="controlgroup">
    </fieldset>
    <button data-inline="true" data-theme="b" class="link-service">Link</button>
<% break; case 'foursquare': %>
    <h3>Link Foursquare</h3>
    <fieldset data-role="controlgroup">
    </fieldset>
    <button data-inline="true" data-theme="b" class="link-service">Link</button>
<% break; case 'tumblr': %>
    <h3>Link Tumblr</h3>
    <fieldset data-role="controlgroup">
    </fieldset>
    <button data-inline="true" data-theme="b" class="link-service">Link</button>
<% break; case 'facebook': %>
    <h3>Link Facebook</h3>
    <fieldset data-role="controlgroup">
    </fieldset>
    <button data-inline="true" data-theme="b" class="link-service">Link</button>
<% break; } %>
</div>
</script>

<script id="linked-service-template" type="text/template">
    <div data-role="collapsible" data-collapsed="true">
    <% switch(service.provider) { case 'twitter': %>
        <h3>Twitter - <%= service.get('username') %></h3>
        <fieldset data-role="controlgroup">
        
            <button class="twitter-import-profile">Import Profile</button>
        
            <input type="checkbox" name="twitter-link" id="twitter-link" class="custom" 
            <% if(service.get('show_username')){%> checked="true" <%}%> />
            <label for="twitter-link">Link to my profile from Snapr</label>
        
            <input type="checkbox" name="twitter-tweet" id="twitter-tweet" class="custom"
            <% if(service.get('allow_tweet')){%> checked="true" <%}%> />
            <label for="twitter-tweet">Allow tweets from Snapr</label>
        
        </fieldset>
    <% break; case 'foursquare': %>
        <h3>Foursquare - <%= service.get('username') %></h3>
        <fieldset data-role="controlgroup">

            <input type="checkbox" name="foursquare-link" id="foursquare-link" class="custom" 
            <% if(service.get('show_username')){%> checked="true" <%}%> />
            <label for="foursquare-link">Display my foursquare username</label>

            <input type="checkbox" name="foursquare-checkin" id="foursquare-checkin" class="custom" 
            <% if(service.get('allow_checkin')){%> checked="true" <%}%> />
            <label for="foursquare-checkin">Allow checkins from Snapr</label>

        </fieldset>
    <% break; case 'tumblr': %>
        <h3>Tumblr - <%= service.get('username') %></h3>
        <fieldset data-role="controlgroup">

            <input type="checkbox" name="tumblr-link" id="tumblr-link" class="custom" 
            <% if(service.get('show_username')){%> checked="true" <%}%> />
            <label for="tumblr-link">Display my Tumblr username</label>

            <input type="checkbox" name="tumblr-post" id="tumblr-post" class="custom" 
            <% if(service.get('allow_post')){%> checked="true" <%}%> />
            <label for="tumblr-post">Allow posts from Snapr</label>

        </fieldset>
    <% break; case 'facebook': %>
        <h3>Facebook - <%= service.get('username') %></h3>
        <fieldset data-role="controlgroup">

            <input type="checkbox" name="facebook-link" id="facebook-link" class="custom" 
            <% if(service.get('show_profile_link')){%> checked="true" <%}%> />
            <label for="facebook-link">Link to my profile from Snapr</label>
        
            <input type="checkbox" name="facebook-newsfeed" id="facebook-newsfeed" class="custom"
            <% if(service.get('allow_newsfeed_posts')){%> checked="true" <%}%> />
            <label for="facebook-newsfeed">Allow newsfeed posts from Snapr</label>

            <input type="checkbox" name="facebook-gallery" id="facebook-gallery" class="custom"
            <% if(service.get('allow_gallery_posts')){%> checked="true" <%}%> />
            <label for="facebook-gallery">Allow newsfeed posts from Snapr</label>

        </fieldset>
        <fieldset data-role="controlgroup">

            <label for="facebook-gallery-name">Gallery Name</label>
            <input type="text" name="facebook-gallery-name" id="facebook-gallery-name" class="custom"
            value="<%= service.get('gallery_name') %>" />

        </fieldset>
    <% break; } %>
        <button data-inline="true" class="unlink">Unlink</button><button data-inline="true" data-theme="b" class="save">Save</button>
    </div>
</script>

<script id="feed-li-list-template" type="text/template">
<li class="feed-li">
    <div>
        <img style="width:100%;height:<%= snapr.utils.get_photo_height(item.get('width'), item.get('height'), '#feed .ui-content') %>px;" src="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/lrg/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" alt="<%= item.get('description') %>" class="thumb-image" />
    
        <!-- gallery version below -->
        <!-- <a href="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/lrg/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" rel="external" class="gallery_link"><img style="width:100%;height:<%= snapr.utils.get_photo_height(item.get('width'), item.get('height'), '#feed .ui-content') %>px;" src="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/lrg/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" alt="<%= item.get('description') %>" class="thumb-image" /></a> -->

        <div><%= item.get('username') %></div>
        <div><%= item.get('description') %></div>
    </div>
</li>
</script>

<script id="thumb-li-template" type="text/template">
    <% _.each( results, function( item, i ){ %>
    <li>
    <a data-ajax="false" href="#/feed/?photo_id=<%= item.get('id') %>&username=<%= item.get('username') %>">
    <img height="100px" width="100px" src="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/thm2/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" alt="<%= item.get('description') %>" class="thumb-image" />
    </a>
    </li>
    <% }); %>
</script>

<script id="upload-progress-heart-complete-template" type="text/template">
    <div class="ui-grid-a upload-progress-container">
        <div class="ui-block-a upload-image">
            <div class="image-crop"><img src="https://s3.amazonaws.com/media-server<%= item.get('server_id') %>.snapr.us/thm2/<%= item.get('secret') %>/<%= item.get('id') %>.jpg" alt="<%= item.get('description') %>" /></div>
        </div>
        <div class="ui-block-b">
            <h3>Thanks!</h3>
        </div>
    </div>
    <div class="message-cont">
        <a data-ajax="false" href="#/upload/" data-role="button" data-inline="true">Take Another</a>
        <a data-ajax="false" href="#/" data-role="button" data-inline="true" data-theme="b">Done</a>
    </div>
    
</script>

<script id="upload-complete-template" type="text/template">
    <div class="ui-block-a upload-image">
        <div class="image-crop"><img class="ui-li-icon" src="<%= thumbnail %>" /></div>
    </div>
    <div class="ui-block-b">
        <h2>Thanks!</h2>
    </div>

<% if (percent_complete == 100){ %>
    <a data-icon="forward" data-theme="d" class="processing"></a>
<% }else{ %>
    <a data-icon="delete" data-theme="d" class="cancel"></a>
<% } %>
</script>

<script src="app/libs/json2.js" type="text/javascript" charset="utf-8"></script> <!-- just in case the browser sucks at JSON -->

<script src="app/libs/jquery-1.6.4.min.js" type="text/javascript" charset="utf-8"></script>
<script src="app/libs/jquery.validate.js" type="text/javascript" charset="utf-8"></script>
<script src="app/libs/jq.cookie.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
snapr = {};
snapr.redirect = '';
snapr.models = {};
snapr.views = {};
snapr.base_url = "http://dev.sna.pr";
snapr.api_base = snapr.base_url + "/api";
snapr.access_token_url = snapr.base_url + "/ext/oauth/access_token/";

// disable jquery-mobile's hash nav so we can replace it with backbone.js
$(document).bind("mobileinit", function(){
    $.mobile.ajaxEnabled = false;
    $.mobile.pushStateEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.defaultPageTransition = 'none';

    $.mobile.fixedToolbars.setTouchToggleEnabled(false);

    // true fixed positioned headers still seem buggy so is disabled
    // $.mobile.touchOverflowEnabled = true;

    // hack to handle cases where we're going directly to a hash
    // we go to the home screen and re-trigger the navigate event
    snapr.redirect = window.location.hash.replace('#','')
    $(document).bind('snaprinit',function(){
        if(snapr.redirect.length){
            console.warn('redirect to',snapr.redirect)
            Route.navigate(snapr.redirect, true);
        }
    });

});
</script>

<script src="app/libs/jquery.mobile-1.0/jquery.mobile-1.0.js" type="text/javascript" charset="utf-8"></script>

<script src="app/libs/klass.min.js" type="text/javascript" charset="utf-8"></script> <!-- used by photoswipe -->
<script src="app/libs/code.photoswipe.jquery-3.0.0.js" type="text/javascript" charset="utf-8"></script> <!-- photoswipe -->

<script src="app/libs/underscore.js" type="text/javascript" charset="utf-8"></script> <!-- required by backbone -->
<script src="app/libs/backbone.js" type="text/javascript" charset="utf-8"></script> <!-- handles routing, models and sync -->

<script src="app/views/home.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/login.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/my_account.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/upload.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/uploading.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/photo_edit.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/upload_settings.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/linked_service.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/linked_services.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/feed.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/upload_progress_li.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/feed_list.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/feed_li.js" type="text/javascript" charset="utf-8"></script>
<script src="app/views/join_snapr.js" type="text/javascript" charset="utf-8"></script>


<script src="app/models/auth.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/user.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/user_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/user_settings.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/linked_service.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/photo.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/photo_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/comment.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/favorite.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/thumb.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/thumb_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/reaction_collection.js" type="text/javascript" charset="utf-8"></script>
<script src="app/models/reaction.js" type="text/javascript" charset="utf-8"></script>
<script src="app/snapr.js" type="text/javascript" charset="utf-8"></script>

<script src="http://localhost:8080/target/target-script-min.js#anonymous"></script>

</body>
</html>