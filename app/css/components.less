//
// COMPONENTS - Bare Bones of Snapr Specific Components
// --------------------------------------------------


// HEADERS
// -------------------------


div[data-role="header"]{
    min-height: @topBarHeight; // So Topbar doesn't collapse without heading

    // Add Centered Button Option 
    .ui-btn-center{
        position: absolute;
        top: @padding;
        width: 100%;
        text-align: center;
    }

    // Line Up Multiple buttons 
    .ui-btn-center{
        .ui-btn,
        .ui-controlgroup{
             margin: 0;
         }
    }
    
    .ui-btn-right,
    .ui-btn-left{
        white-space: nowrap;
        .ui-btn{
             display: inline-block;
             margin: 0;
             top: @padding;
         }
    }
}

// CONTENT
// -------------------------


div[data-role="content"]{
    padding: @padding * 2;
    
    .s-inset-header{
        margin: -@padding * 2 -@padding * 2 0 -@padding * 2;
        background-color: @grayLighter;
    }
}


// Set page element to full height if you need fullscreen elements 
.s-full-height{
    min-height: 400px;
    .box-sizing(border-box);
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
}


// TAB BAR
// -------------------------


.s-tabbar-activity{
    position: absolute;
    top: -30px;
    right: 0;
}





// AVATARS
// -------------------------

.s-avatar,
.s-avatar-med,
.s-avatar-large{
    width: @avatarSize;
    height: @avatarSize;
    background-color: @grayLighter;
    background-size: 100% 100%;
    background-size: cover;
    background-position: center;
    .border-radius(2px);
    display: block;
}

.s-avatar-med{
    width: @avatarSizeMed;
    height: @avatarSizeMed;
    .border-radius(4px);
}

.s-avatar-large{
    width: @avatarSizeLarge;
    height: @avatarSizeLarge;
    .border-radius(4px);
}


// IMAGES
// -------------------------


.s-image-loader-bg{
    background-color: @grayLight;
    background-image: url('gfx/image-load.gif');
    background-repeat: no-repeat;
    background-position: center;
    img{
        display: block;
    }
}

.s-thumbs-grid-med,
.x-grid #feed-images{
    margin: 0 -@padding * 2;
    padding: 0 @padding 0 @padding;
    min-height: @thumbSize;

    .s-image-link{
        display: inline-block;
        padding: 0;
        margin: 0;
    }
    .s-thumb-image{
        width: @thumbSize;
        height: @thumbSize;
        padding: 0;
        margin: 0;
        display: block;
        background-color: @grayLight;
    }
}


// BAR
// -------------------------

.ui-bar{
    margin-left: -@padding * 2;
    margin-right: -@padding * 2;
    
    .ui-btn,
    &.ui-btn{
        .ui-btn-inner{
            padding-top: 0;
            padding-bottom: 0;
            height: @barHeight;
            line-height: @barHeight;
        }
    }
    
    // Split Bars with Button on right
    .ui-controlgroup-controls{
        width: 100%;
    }
    .s-bar-left{
        width: 80%;
        box-sizing: border-box;
        margin: 0;
        border-right: none;
        .ui-btn-inner{
            text-align: left;
            padding-right: 0;
        }
    }
    .s-bar-right{
        width: 20%;
        box-sizing: border-box;
        margin: 0;
    }
}


// STREAMS
// -------------------------

/* Horizontally scrolling image stream components */
.s-image-streams{
    .x-stream{
        position: relative;
        margin-bottom: @padding * 2 ;
        white-space: no-wrap;
        .x-thumbs{
            display: inline-block;
            min-width: @thumbSize * 3 + @padding * 2;
        }
        .s-image-link{
            padding-left: @paddingGrid;
        }
        .s-load-more-inline{
            background-color: @grayLight;
            width: @thumbSize;
            height: @thumbSize;
            display: inline-block;
            vertical-align: top;
            position: relative;
            .ui-btn-text{
                display: inline-block;
                text-align: center;
                font-size: 11px;
                font-weight: bold;
                text-transform: lowercase;
                bottom: 12px;
                position: absolute;
                width: 101px;
                color: @gray;
            }
            .ui-icon-refresh{
                background-image: url('@{gfx}@{gfxRefresh}');
                background-repeat: no-repeat;
                position: absolute;
                display: block;
                left: 50%;
                top: 50%;
                width: @gfxRefresh-grid;
                height: @gfxRefresh-grid;
                margin-top: -@gfxRefresh-grid / 2;
                margin-left: -@gfxRefresh-grid / 2;
                -webkit-transition-property:-webkit-transform;
            	-webkit-transition-duration:250ms;
            	-webkit-transform:rotate(0deg) translateZ(0);
            }
            &.x-right-pull{
                margin-right: 9px;
                .ui-icon-refresh{
                    background-position: @gfxRefresh-x @gfxRefresh-right-y;
                }
            }
            &.x-left-pull{
                margin-right:-@padding;
                 .ui-icon-refresh{
                     background-position: @gfxRefresh-x @gfxRefresh-left-y;
                 }
            }
            &.x-flipped{
                 .ui-icon-refresh{
                     background-position: @gfxRefresh-x @gfxRefresh-refresh-y;
    	            -webkit-transform:rotate(180deg) translateZ(0);
	            }
    	    }
        }
        .x-loading {
            .s-load-more-inline{
                 .ui-icon-refresh{
                    background-image: url('gfx/spinner.png');
                    background-position: center;
                    .spin();
                }
            }
        }
        .x-no-more{
            .x-right-pull{
                .ui-icon-refresh{
                    display: none;
                }
                //turns 'the end' into big full stop..
                .x-msg{
                    background-color:rgba(0,0,0,.12);
                    padding: 36px 0;
                    width: 84px;
                   .border-radius(44px);
                    color: white;
                    height: 12px;
                    vertical-align: middle;
                    margin-left: 10px;
                }
            }
        }
        .edit-overlay{
            display: none;
            position: absolute;
            top: 40px;
            width: 109%;
            background-color: rgba(255, 255, 255, .8);
            min-height: @thumbSize;
            margin-left: -8px;
            margin-right: -8px;
            right: 0;
            .remove-stream{
                display: inline-block;
                position: absolute;
                right: 8px;
                top: 50%;
                margin-top: -18px;
            }
            // Styles for remove btn on streams with no images
            &.over-bar{
                top: 2px;
                width: auto;
                min-height: 0;
                z-index: 10;
                .remove-stream{
                    margin-top: 4px;
                    .ui-btn-inner{
                        padding: 4px 32px 4px 16px;
                    }
                }
            }

         }

    }
}
.edit{
       .x-stream.user-stream{
            .edit-overlay{
                   display: block;
            }
        }
    }

.x-scroll-wrapper {
  white-space: nowrap;
  display:inline-block;
}
.x-right-pull, .x-left-pull{
    display:inline;
}





// FEED
// -------------------------


.s-feed-header{
    position: relative;
    .s-icon-left{
        padding-left: @avatarSizeLarge;
        height: @avatarSizeLarge;
    }
    .s-profile-icon,
    .s-icon-overlay{
        position:absolute;
        top: 0;
        left: 0;
        width: @avatarSizeLarge;
        height: @avatarSizeLarge;
    }
    .s-profile-icon{
        background-color: @grayLight;
    }
    .s-username{
        position: relative;
        padding-left: @padding * 2;
        margin: 0;
        height: @barHeight;
        line-height: @barHeight;
        vertical-align: middle;
        top: 0;
        .s-follow-btn{
            position: absolute;
            right: 0;
            top:0;
            display: block;
            width: 100%;
            .ui-btn{
                position: absolute;
                right: 0;
                top: 0;
                margin: 0;
                width: 100%;
                text-align: right;
                
                .ui-btn-inner{
                    padding-top: 0;
                    padding-bottom: 0;
                }
            }
        }
    }
    .s-header-stats{
        height: @avatarSizeLarge - @barHeight ;
        text-align: center;
        .s-hero-number{
            padding-top: @padding * 4;
            display: block;
        }
    }
}



.s-image-item-block{
    margin: @padding * 2 0 @padding * 6 0;
    .s-image-item-topbar{
        height:  @avatarSize + 1px;//haxy to account for mysterious icon overhang
        margin-bottom: @padding * 2;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        .s-avatar,
        .s-username,
        .s-image-time-and-location,
        .s-image-time{
            height:@avatarSize;
            line-height:@avatarSize;
            vertical-align: middle;
            display: inline-block;
        }      
    }
    .s-image-item{
        position: relative;
        .s-image-status{
            position: absolute;
            top: -14px;
            background-color: #e5592f;
            color: white;
            font-size: 11px;
            font-weight: bold;
            text-shadow: none;
            padding: 0px 3px;
            right: 0;
            height: 14px;
            .border-top-radius(4px);
            opacity: .5;
            display: none;
        }
    }
    
    .s-main-s-image-link{
        display: block;
    }
    .s-main-image{
        width: 100%;
    }
    .s-image-description{
        margin-top: @padding * 2;
        margin-bottom: -@padding * 2;
    }
    .image-item-base{
        position: relative;
    }
    .image-actions{
        // reactions btn off to the right
        .reactions-button{
           position: absolute;
           right: 0;
           top: 0;
        }

    }

    .reactions-list{
        display: none;
        .box-shadow(none);
        li.ui-li{
            border: none!important;
            padding:0;
             .ui-link-inherit{
                    padding: 0 0 @paddingElement 0!important;
                    display: inline-block;
                    white-space: normal;
                }
            .ui-icon-arrow-r{
                display: none;
            }
            .username{
                text-transform: none;
                text-shadow: none;
            }
            .comment,
            .like-text{
                white-space: normal;
                font-weight: normal;
                text-transform: none;
                text-shadow: none;
            }
        }

    }
    .comment-area{
        display: none;
        .photo-comment{
            min-height: 75px;
        }
    }
}

.s-image-item-block.private{
    .s-image-status{
        display:inherit;
    }
}


// removing the annoying negative margins temporarily
.ui-content {
    .feed-upload-list{
        margin: 0;
    }
}

.s-my-snaps-only {
  display: none!important;
}
.x-my-snaps .s-my-snaps-only {
  display: inline-block !important;
}
.x-my-snaps .x-not-on-my-snaps {
  display: none!important;
}


// GALLERIES - tweaks to photoswipe
// -------------------------

div.ps-carousel-item-loading
{
    background: url('gfx/image-load-dark.gif') no-repeat center center;
}



// MAP PAGE
//------------------

#map{
    div[data-role="content"]{
        padding-top: 0;
        padding-bottom: @padding * 2;
        .box-sizing(border-box);
    }
    &.loading{
        .s-map-time{
            .s-map-time-btn{
                display: none;
            }
        }
        .s-map-loading{
            width: 32px;
            height:32px;
            overflow: hidden;
            .border-radius(16px);
            .ui-icon{
                opacity: .7;
                width: 32px;
                height:32px;
            }
        }
    }
}

#map-layer{
    #google-map{
        margin: -3px -@padding * 2;
    }
}

.s-photo-map{
    position:relative;
    overflow:hidden;

    // Map Thumbs
    .s-map-point {
        width: 1px;
        height: 1px;
        overflow: visible;
        position:absolute;
        z-index: 1;
    }
    
    .s-map-thumb {
           position: absolute;
           bottom: -3px;
           left: -38px;
           width: 78px;
           height: 120px;
           z-index: 100;
           .s-map-thumbimage {
               position: absolute;
               top: 8px;
               left: 9px;
               width: 60px;
               height: 60px;
           }
           .s-map-pin{
               position: absolute;
               top:83px;
               left: 32px;
               background-image: url('gfx/map-pin.png');
               width:28px;
               height: 35px;
               display: block;
           }
           .s-thumb-bg {
               position: absolute;
               top: 0;
               left: 0;
               background-image: url('gfx/map-thumb-bg.png');
               width:78px;
               height: 88px;
               display: block;
           }
       }
    
    
    .x-map-venue{
        .x-map-venue-pin{
            background-image: url('gfx/map-spot-pin.png');
            position: absolute;
            display: block;
            bottom: 0;
            left: -18px;
            width: 36px;
            height: 28px;
            cursor: pointer;
        }
        .x-map-venue-label{
            display: none;
            background-image: url('gfx/map-spot-label.png');
            position: absolute;
            bottom: 23px;
            left: -70px;
            width: 139px;
            height: 47px;
            z-index: 1;
            text-decoration: none;
            .s-venue-label-text{
                color: white;
                font-weight: bold;
                text-shadow: black 0 -1px 1px;
                display: block;
                padding: 9px 26px;
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: nowrap;
                font-size: 13px;
                text-decoration: none;
            }
        }
        &.active{
            z-index: 2;
            .x-map-venue-label{
                display: block;
            }
        }
    }

    .s-map-current-location{
      position: absolute;
      top: -9px;
      left: -9px;
      width: 17px;
      height: 17px;
      z-index: 100;
      background-image: url('gfx/map-current-location-marker.png');
    }
   

    #s-map-alert{
        position: absolute;
        top: 50%;
        left: 50%;
        width: 160px;
        margin-left: -80px;
        margin-top: -30px;
        .s-map-image-alert{
            background-color: white;
            padding: 6px;
            padding-left: 48px;
            position: relative;
            color: @grayDark;
            .border-radius(8px);
            border: solid #ffcc00 4px;
            font-size: 12px;
            .box-shadow(0px 4px 6px rgba(0, 0, 0, .3) );
            .ui-icon-no-images{
                position: absolute;
                left: 9px;
                top: 3px;
            }
        }
    }
    .s-map-controls{
        position: absolute;
        bottom: 0;
        width: 100%;
        margin: 0 -8px;
        .ui-select,
        .ui-input-text{
            display: block;
            vertical-align: middle;
            margin-bottom: 0;
        }
        .s-map-time{
            position: absolute;
            left: 8px;
            top: 6px;
            .s-map-time-label{
                position: absolute;
                top: -32px;
                left: 0;
                white-space: nowrap;
            }
          
        }
        .s-map-filters{
            margin: 6px;
            margin-left: 48px;
        }
    }
    #x-map-disambiguation{
        position: absolute;
        display: none;
        top: @padding * 2;
        right: @padding * 2;
        z-index: 100;
        min-height: 0px;
        overflow: visible;
    }

    #x-no-results {
        width:70%;
        .s-map-image-alert {
            background-color: #ffffff;
            padding: 6px;
            padding-left: 48px;
            position: relative;
            color: #ff8400;
            -moz-border-radius: 8px;
            -webkit-border-radius: 8px;
            border-radius: 8px;
            border: solid #ffff00 4px;
            font-size: 12px;
            -moz-box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
            -webkit-box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
        }
    }

}

//a tweak for the mobiscroll time picker css
.jqm{
    .dwo{background-color: @blackTrans;}
    .dwbc{.dwbw{.dwb{margin: 8px;}}}
}








